<script setup>
import { ref } from 'vue';
import { Head, router } from '@inertiajs/vue3';
import AuthenticatedLayout from '@/Layouts/AuthenticatedLayout.vue';
import TutorialSlides from '@/Components/TutorialSlides.vue';

const props = defineProps({
    product: Object,
    hasCompleted: Boolean,
    certificate: Object,
});

const showCertificate = ref(props.hasCompleted);

const tutorialSlides = ref([
    {
        title: "Welcome to CCTV Camera Troubleshooting!",
        text: "Hey there! Ready to become a CCTV troubleshooting expert? I'm your FieldOps Pro guide, and I'm going to teach you everything about diagnosing and fixing both PoE digital cameras and analog CCTV systems!\n\nThis comprehensive training covers:\n\nüìπ Understanding PoE (Power over Ethernet) systems\nüì∫ Analog camera fundamentals\nüîß Common failure points and diagnostics\n‚ö° Power and connectivity issues\nüì° Video signal problems\nüåê Network configuration troubleshooting\nüß™ Testing equipment and techniques\n\nCCTV systems are EVERYWHERE - offices, retail stores, warehouses, parking lots. Master these troubleshooting skills and you'll always be in demand. Let's dive in!",
        image: "https://images.unsplash.com/photo-1557597774-9d273605dfa9?w=1200&h=600&fit=crop&q=80",
        imageCaption: "Modern CCTV surveillance systems combining PoE and analog technologies"
    },
    {
        title: "Understanding PoE Camera Systems",
        text: "Let's start with PoE (Power over Ethernet) digital cameras - the modern standard for CCTV installations.\n\nüîå HOW PoE WORKS:\nPoE delivers both power AND data over a single Ethernet cable (Cat5e/Cat6). No separate power cable needed!\n\nüèóÔ∏è SYSTEM COMPONENTS:\n\nüì∑ IP Camera - Network-connected camera with built-in processor\nüîÑ PoE Switch/Injector - Provides 15.4W to 30W per port\nüíæ NVR (Network Video Recorder) - Stores and manages video\nüåê Network Infrastructure - Cables, routers, switches\n\n‚ö° POE STANDARDS:\n‚Ä¢ PoE (802.3af) = 15.4W - Basic cameras\n‚Ä¢ PoE+ (802.3at) = 30W - PTZ cameras\n‚Ä¢ PoE++ (802.3bt) = 60-100W - High-power systems\n\nKnowing these basics helps you diagnose 90% of PoE camera issues!",
        image: "https://images.unsplash.com/photo-1558346490-a72e53ae2d4f?w=1200&h=600&fit=crop&q=80",
        imageCaption: "PoE IP camera system with network switch and NVR"
    },
    {
        title: "Understanding Analog Camera Systems",
        text: "Now let's cover analog CCTV systems - still widely used and often what you'll encounter in older installations.\n\nüì∫ HOW ANALOG WORKS:\nAnalog cameras send video signals over coaxial cable (like old TV antennas). Simple and reliable!\n\nüèóÔ∏è SYSTEM COMPONENTS:\n\nüìπ Analog Camera - Captures in analog format (CVBS, AHD, TVI, CVI)\nüìÄ DVR (Digital Video Recorder) - Converts analog to digital\nüîå Power Supply - Separate 12V DC for each camera\nüîó Cabling - RG59/RG6 coaxial for video, separate power wires\n\nüìä VIDEO FORMATS:\n‚Ä¢ CVBS - Traditional analog (low res)\n‚Ä¢ AHD - HD over coax (720p-1080p)\n‚Ä¢ TVI/CVI - Competing HD-over-coax standards\n\nüí° KEY DIFFERENCE:\nAnalog = Separate power and video cables\nPoE = Combined in one Ethernet cable\n\nUnderstanding both systems makes you valuable - many sites have mixed installations!",
        image: "https://images.unsplash.com/photo-1557597774-9d47605007b1?w=1200&h=600&fit=crop&q=80",
        imageCaption: "Traditional analog CCTV cameras with coaxial cabling and DVR system"
    },
    {
        title: "Essential Technician's Toolkit",
        text: "Having the right tools makes troubleshooting 10X easier and faster. Here's your complete shopping list!\n\n‚ö° FOR PoE/DIGITAL SYSTEMS:\n‚úÖ PoE Tester/Validator - Test voltage and data\n‚úÖ Network Cable Tester - Verify all 8 wires\n‚úÖ Multimeter - Measure voltage accurately\n‚úÖ Laptop - Configure cameras and test network\n‚úÖ Ethernet Crimping Tool - Make/repair cables\n‚úÖ RJ-45 Connectors - Have extras on hand\n\nüì∫ FOR ANALOG SYSTEMS:\n‚úÖ Multimeter - Test 12V DC power\n‚úÖ Portable Test Monitor - See video at camera\n‚úÖ Coax Cable Tester - Check cable integrity\n‚úÖ BNC Compression Tool - Professional connections\n‚úÖ BNC Connectors - Various sizes\n\nüì± UNIVERSAL TOOLS:\n‚úÖ Smartphone with Camera - Document everything\n‚úÖ Flashlight/Headlamp - See in dark spaces\n‚úÖ Label Maker - Organize your work\n‚úÖ Notepad - Track IPs and settings\n\nClick the links below to see recommended tools on Amazon!",
        image: "https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=1200&h=600&fit=crop&q=80",
        imageCaption: "Professional CCTV technician toolkit with testers and hand tools",
        links: [
            {
                icon: "üîå",
                title: "PoE Network Cable Tester (TRENDnet)",
                price: "$79.99",
                url: "https://www.amazon.com/TRENDnet-Network-Cable-Tester-TC-NT3/dp/B01M63EMBQ"
            },
            {
                icon: "‚ö°",
                title: "PoE Voltage Tester & Power Checker",
                price: "$45.99",
                url: "https://www.amazon.com/Klein-Tools-VDV500-820-Cable-Tester/dp/B07MKZHRRY"
            },
            {
                icon: "üìè",
                title: "KAIWEETS Digital Multimeter (Affordable)",
                price: "$39.99",
                url: "https://www.amazon.com/KAIWEETS-Multimeter-Resistance-Capacitance-Temperature/dp/B07SHLS639"
            },
            {
                icon: "üì∫",
                title: "Portable Test Monitor (7\" LCD)",
                price: "$89.99",
                url: "https://www.amazon.com/LILLIPUT-7-Inch-Monitor-HDMI-Input/dp/B00HZN0D9U"
            },
            {
                icon: "üîß",
                title: "Professional RJ45 Crimping Tool Kit",
                price: "$29.99",
                url: "https://www.amazon.com/iCrimp-Crimping-Connectors-Stripper-Accessories/dp/B01K4JE53Q"
            },
            {
                icon: "üîå",
                title: "BNC Compression Tool for Coax",
                price: "$34.99",
                url: "https://www.amazon.com/Klein-Tools-VDV212-015-Compression-Connectors/dp/B002D3B97U"
            }
        ],
        quiz: {
            question: "What's the main advantage of using a PoE tester over just a multimeter?",
            options: [
                "It's cheaper and easier to use",
                "It tests both power delivery AND data connectivity in one tool",
                "You don't need one - multimeters are enough",
                "PoE testers can fix cameras automatically"
            ],
            correctAnswer: 1,
            correctFeedback: "üéØ Exactly! A PoE tester verifies both power AND network connectivity, saving you time by testing everything at once.",
            incorrectFeedback: "Think about what makes PoE special - it combines power and data. A PoE tester checks both functions simultaneously!"
        }
    },
    {
        title: "Interactive Scenario 1: The Dead Camera",
        text: "üé¨ REAL-WORLD SCENARIO:\n\nYou arrive at a retail store. The manager says: \"Camera 3 in the back room stopped working yesterday. It's completely dead - no lights, nothing on the monitor.\"\n\nYou walk to the camera location and observe:\n‚Ä¢ Camera is mounted 12 feet high\n‚Ä¢ No LED lights visible on camera\n‚Ä¢ Cable runs through ceiling\n‚Ä¢ Other 7 cameras in store work fine\n‚Ä¢ System uses PoE IP cameras\n‚Ä¢ 16-port PoE switch in server closet\n\nWhat's your FIRST troubleshooting step?",
        image: "https://images.unsplash.com/photo-1563013544-824ae1b704d3?w=1200&h=600&fit=crop&q=80",
        imageCaption: "CCTV camera mounted in retail environment - troubleshooting scenario",
        quiz: {
            question: "What should you check FIRST?",
            options: [
                "Immediately climb ladder and take camera down to bench test it",
                "Check the PoE switch to see if the port has link lights and is providing power",
                "Replace the camera with a new one to see if that fixes it",
                "Check if the NVR software needs updating"
            ],
            correctAnswer: 1,
            correctFeedback: "‚úÖ Perfect! Always start at the switch - it's safer, faster, and tells you if power is being delivered. No need to climb a ladder yet! You see no link lights on port 3. Next step: Test the port with your PoE tester...",
            incorrectFeedback: "Think about working safely and efficiently. Before climbing ladders or replacing parts, check the POWER SOURCE first. Head to that PoE switch!"
        }
    },
    {
        title: "Scenario 1 Continued: Testing the Switch",
        text: "Good decision! You head to the server closet and check the PoE switch.\n\nüîç WHAT YOU OBSERVE:\n‚Ä¢ Switch is powered on (green power LED)\n‚Ä¢ Ports 1, 2, 4-8 show green link lights\n‚Ä¢ Port 3 (dead camera) shows NO link light\n‚Ä¢ Switch shows 16 ports, 120W total PoE budget\n‚Ä¢ Label says \"Port 3 = Back Room Camera\"\n\nYou plug your PoE tester into port 3...\n\n‚ö° TESTER RESULTS:\n‚Ä¢ No voltage detected\n‚Ä¢ No data link\n‚Ä¢ Port appears completely dead\n\nWhat's your next move?",
        image: "https://images.unsplash.com/photo-1560732488-6b0df240254a?w=1200&h=600&fit=crop&q=80",
        imageCaption: "Network switch with PoE ports - some showing link lights, one dead",
        quiz: {
            question: "Port 3 shows no power or link. What should you do next?",
            options: [
                "The switch is bad - replace the entire switch immediately",
                "Test the same PoE tester on port 9 (empty port) to see if the switch can deliver PoE at all",
                "The cable from port 3 to the camera must be bad - start pulling new cable",
                "Call the camera manufacturer for technical support"
            ],
            correctAnswer: 1,
            correctFeedback: "üéØ Excellent troubleshooting! You test port 9 and get 52V PoE! The switch CAN deliver power. This tells you: ‚úÖ Switch works ‚úÖ Your tester works ‚ùå Port 3 is dead OR the cable is bad. Next: Let's test if it's the port or the cable...",
            incorrectFeedback: "Don't jump to conclusions! Test if the SWITCH can deliver PoE on other ports. This verifies your switch and your tester are working."
        }
    },
    {
        title: "Scenario 1 Continued: Port vs Cable?",
        text: "Smart! You tested port 9 (empty) and got 52V PoE. The switch is good!\n\nü§î THE QUESTION:\nIs port 3 dead, or is the cable bad?\n\nüß™ YOUR TEST:\nYou unplug the back room camera cable from port 3, then plug it into the working port 9.\n\nYou connect your PoE tester to the CAMERA END of the cable (at the ceiling).\n\n‚ö° RESULT:\nYour PoE tester shows: 48V detected! Data link established!\n\nüí° WHAT THIS TELLS YOU:\n‚úÖ The cable is GOOD (delivers power and data)\n‚úÖ The switch port 9 works\n‚ùå The switch port 3 is DEAD\n\nNow you know the problem!",
        image: "https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=1200&h=600&fit=crop&q=80",
        imageCaption: "Testing cable with PoE tester - isolating the problem",
        quiz: {
            question: "You've confirmed port 3 is dead but the cable is good. What's the best solution?",
            options: [
                "Replace the entire PoE switch ($300-500) since port 3 doesn't work",
                "Simply move the camera cable to port 9 and update your documentation - camera works now!",
                "Run a completely new cable because you can't trust the switch",
                "Tell the customer the camera needs replacing"
            ],
            correctAnswer: 1,
            correctFeedback: "üí∞ Perfect! Port 9 works, cable works, camera works. Just move the connection! Update your port labels: \"Port 9 = Back Room Camera (was port 3)\". Document that port 3 is dead. Job done in 15 minutes! The customer is happy and you look like a pro. This is real-world troubleshooting - systematic, fast, and cost-effective!",
            incorrectFeedback: "Think cost-effectively! You have 16 ports and one is dead. The switch still has 15 working ports. Why replace anything when you can just use a different port?"
        }
    },
    {
        title: "Understanding PoE Power Budgets",
        text: "Let's dive deeper into PoE power budgets - this trips up many techs!\n\nüí° THE CONCEPT:\nEvery PoE switch has a TOTAL power budget. Add up all connected devices - if you exceed it, cameras won't power on!\n\nüìä VISUAL EXAMPLE:\nSwitch: 16 ports, 120W total budget\n\n‚úÖ SCENARIO A - Works:\n‚Ä¢ 6 cameras @ 15W each = 90W\n‚Ä¢ 2 cameras @ 12W each = 24W\n‚Ä¢ Total: 114W / 120W (96% used) ‚úì\n\n‚ö†Ô∏è SCENARIO B - Danger Zone:\n‚Ä¢ 8 cameras @ 15W each = 120W\n‚Ä¢ Total: 120W / 120W (100% used)\n‚Ä¢ NO HEADROOM - any spike fails!\n\n‚ùå SCENARIO C - Failure:\n‚Ä¢ 10 cameras @ 15W each = 150W\n‚Ä¢ Exceeds 120W budget\n‚Ä¢ Last 2 cameras won't power on!\n\nüéØ PROFESSIONAL TIP:\nAlways plan for 80% max usage (96W of 120W). This gives you headroom for power spikes!",
        image: "https://images.unsplash.com/photo-1558494949-ef010cbdcc31?w=1200&q=80",
        imageCaption: "PoE power budget visualization showing working vs failed scenarios"
    },
    {
        title: "Interactive Scenario 2: Mysterious Power Issues",
        text: "üé¨ NEW SCENARIO:\n\nYou get a call: \"Our cameras keep going offline randomly, usually in the afternoon.\"\n\nYou investigate and find:\n‚Ä¢ 12 PoE cameras on site\n‚Ä¢ 16-port PoE switch, 200W budget\n‚Ä¢ 10 cameras work fine\n‚Ä¢ Cameras 11 and 12 randomly reboot\n‚Ä¢ Problem started 2 weeks ago\n‚Ä¢ Client recently added 2 new cameras (#11 and #12)\n\nYou check power consumption:\n‚Ä¢ Cameras 1-10: 12W each = 120W\n‚Ä¢ Cameras 11-12: 30W each = 60W\n‚Ä¢ Total: 180W / 200W budget\n\nThe math says it should work! But cameras 11-12 still reboot randomly...\n\nWhat could be wrong?",
        image: "https://images.unsplash.com/photo-1573167243872-43c6433b9d40?w=1200&h=600&fit=crop&q=80",
        imageCaption: "Multiple security cameras - intermittent power issues",
        quiz: {
            question: "Math says 180W/200W should work, but cameras reboot. What's the likely cause?",
            options: [
                "The cameras are defective and need replacement",
                "Environmental heat causes power consumption spikes beyond rated specs",
                "The network bandwidth is too high",
                "Someone is unplugging cameras as a prank"
            ],
            correctAnswer: 1,
            correctFeedback: "üî• Brilliant! HEAT is the culprit! In afternoon sun, camera power consumption spikes 20-30% above rated specs. 180W + 20% = 216W! This exceeds the 200W budget. Solutions: 1) Add a second PoE switch, 2) Use PoE injectors for cameras 11-12, 3) Add sunshades to reduce heat. Real-world troubleshooting considers environment, not just specs!",
            incorrectFeedback: "Think about WHEN it happens - afternoons. What changes? Temperature! Hot cameras draw more power. Your 180W rating can spike to 216W in heat!"
        }
    },
    {
        title: "Network Configuration Basics",
        text: "PoE cameras live on your network - understanding IP addressing is CRUCIAL!\n\nüåê IP ADDRESS BASICS:\n\nEvery device needs a unique IP address in the same subnet.\n\n‚úÖ CORRECT SETUP:\nNVR: 192.168.1.100\nCamera 1: 192.168.1.101\nCamera 2: 192.168.1.102\n(All in 192.168.1.x subnet) ‚úì\n\n‚ùå COMMON MISTAKE:\nNVR: 192.168.1.100\nCamera: 192.168.0.50\n(Different subnets - won't talk!) ‚úó\n\nüîß DHCP vs STATIC:\n\nüì° DHCP (Dynamic):\n‚Ä¢ Router assigns IPs automatically\n‚Ä¢ Good: Easy setup\n‚Ä¢ Bad: IPs can change, cameras disappear\n\nüìå STATIC (Fixed):\n‚Ä¢ You manually set each IP\n‚Ä¢ Good: IPs never change, reliable\n‚Ä¢ Bad: Takes more setup time\n\nüí° PRO RECOMMENDATION:\nUse STATIC IPs for cameras. Document them all!",
        image: "https://images.unsplash.com/photo-1544197150-b99a580bb7a8?w=1200&q=80",
        imageCaption: "IP address subnet configuration diagram for CCTV systems"
    },
    {
        title: "Interactive Scenario 3: The Invisible Camera",
        text: "üé¨ CHALLENGING SCENARIO:\n\nCustomer: \"I installed a new IP camera but can't see it in my NVR. The camera has power - I see lights on it.\"\n\nYOU OBSERVE:\n‚Ä¢ Camera power LED is ON (green)\n‚Ä¢ Network link light is BLINKING (data flowing)\n‚Ä¢ NVR shows 5 cameras, this would be #6\n‚Ä¢ NVR IP: 192.168.1.100\n‚Ä¢ Other cameras: 192.168.1.101-105\n\nYou run an IP scanner...\n\nüì° SCAN RESULTS:\n192.168.1.100 - NVR\n192.168.1.101 - Camera 1\n192.168.1.102 - Camera 2\n192.168.1.103 - Camera 3\n192.168.1.104 - Camera 4\n192.168.1.105 - Camera 5\n192.168.0.64 - Unknown device!\n\nWhat's wrong?",
        image: "https://images.unsplash.com/photo-1550751827-4bd374c3f58b?w=1200&h=600&fit=crop&q=80",
        imageCaption: "IP camera with LED lights showing power and network activity",
        links: [
            {
                icon: "üîç",
                title: "Advanced IP Scanner (Free Software)",
                price: "Free",
                url: "https://www.advanced-ip-scanner.com/"
            },
            {
                icon: "üîç",
                title: "SADP Tool - Hikvision IP Config",
                price: "Free",
                url: "https://www.hikvision.com/en/support/tools/hitools/cl1f27f97b2e3d7b0e/"
            }
        ],
        quiz: {
            question: "The camera is at 192.168.0.64 but the NVR is at 192.168.1.100. Why can't they communicate?",
            options: [
                "The camera is too far away from the NVR",
                "Different subnets (192.168.0.x vs 192.168.1.x) - they can't see each other",
                "The camera needs a firmware update",
                "The NVR is full and can't add more cameras"
            ],
            correctAnswer: 1,
            correctFeedback: "üéØ Perfect! The camera came preset to 192.168.0.64 (different subnet). The NVR is in 192.168.1.x subnet. They're like different neighborhoods - can't talk! SOLUTION: 1) Connect laptop to camera, 2) Access camera web interface at 192.168.0.64, 3) Change camera IP to 192.168.1.106 (static), 4) Change subnet mask to match (255.255.255.0), 5) Now NVR can see it! Always check subnets first!",
            incorrectFeedback: "Look at the IP addresses! 192.168.0.64 vs 192.168.1.100 - they're in different subnets. Devices must be in the same subnet to communicate."
        }
    },
    {
        title: "Analog Camera Troubleshooting",
        text: "Now let's master analog systems - different technology, different problems!\n\nüì∫ ANALOG SIGNAL PATH:\nCamera ‚Üí Coax Cable ‚Üí DVR ‚Üí Display\n\nüîç COMMON SYMPTOMS & CAUSES:\n\n‚ùÑÔ∏è SNOWY/STATIC IMAGE:\n‚Ä¢ Weak signal (cable too long)\n‚Ä¢ Bad connectors (corrosion)\n‚Ä¢ Damaged coax shield\n‚Üí Test with portable monitor at camera\n\nüåä ROLLING HORIZONTAL LINES:\n‚Ä¢ Ground loop interference\n‚Ä¢ AC power interference\n‚Üí Use ground loop isolator\n\n‚ö´ COMPLETE BLACK SCREEN:\n‚Ä¢ No power to camera\n‚Ä¢ Completely bad cable\n‚Ä¢ Wrong DVR input selected\n‚Üí Check voltage at camera first\n\nüîÖ DIM/DARK IMAGE:\n‚Ä¢ Voltage drop (cable too long)\n‚Ä¢ Undersized wire gauge\n‚Ä¢ Weak power supply\n‚Üí Measure voltage: should be 11.5-12.5V\n\nüë• GHOSTING/DOUBLE IMAGE:\n‚Ä¢ Impedance mismatch\n‚Ä¢ Cable termination wrong\n‚Üí Check 75Œ© termination",
        image: "https://images.unsplash.com/photo-1600783245777-6d0ac96c0096?w=1200&h=600&fit=crop&q=80",
        imageCaption: "Analog CCTV camera installation with coaxial cabling"
    },
    {
        title: "The Voltage Drop Calculator",
        text: "Voltage drop is the #1 killer of analog cameras! Let's master it.\n\n‚ö° THE PROBLEM:\n12V at power supply ‚Üí 9V at camera = Camera fails!\n\nüßÆ VOLTAGE DROP FORMULA:\nDrop (V) = (2 √ó Length √ó Current √ó Resistance) √∑ 1000\n\nWhere:\n‚Ä¢ Length = meters of cable\n‚Ä¢ Current = amps camera draws\n‚Ä¢ Resistance = Œ©/km of wire gauge\n\nüìä WIRE RESISTANCE:\n‚Ä¢ 18 AWG = 21 Œ©/km\n‚Ä¢ 16 AWG = 13 Œ©/km\n‚Ä¢ 14 AWG = 8 Œ©/km\n\nüí° REAL EXAMPLE:\n‚Ä¢ Cable: 150m run\n‚Ä¢ Camera: 0.5A draw\n‚Ä¢ Wire: 18 AWG (21 Œ©/km)\n\nDrop = (2 √ó 150 √ó 0.5 √ó 21) √∑ 1000\nDrop = 3,150 √∑ 1000 = 3.15V\n\nCamera gets: 12V - 3.15V = 8.85V ‚ùå\n(Minimum needed: 11V)\n\n‚úÖ SOLUTION: Use 16 AWG wire!\nDrop = (2 √ó 150 √ó 0.5 √ó 13) √∑ 1000 = 1.95V\nCamera gets: 12V - 1.95V = 10.05V ‚ùå Still too low!\n\n‚úÖ BEST SOLUTION: Use 14 AWG OR add mid-point power!",
        image: "https://images.unsplash.com/photo-1621905251918-48416bd8575a?w=1200&q=80",
        imageCaption: "Voltage drop chart showing wire gauge vs cable length"
    },
    {
        title: "Interactive Scenario 4: The Dying Camera",
        text: "üé¨ TRICKY SCENARIO:\n\nCustomer: \"Camera was working fine, then started showing a dark image. Now it's completely dead.\"\n\nYOUR INVESTIGATION:\n‚Ä¢ Analog camera, 300 feet from DVR\n‚Ä¢ Camera powered from central power supply\n‚Ä¢ 18 AWG wire used for power\n‚Ä¢ Camera rated 12V DC, 500mA\n‚Ä¢ Power supply output: 12.2V (measured)\n‚Ä¢ Other cameras on shorter runs work fine\n\nYou climb the ladder and measure voltage AT THE CAMERA with your multimeter...\n\n‚ö° READING: 8.3V DC\n\nThe camera needs minimum 11V to operate.\n\nWhat's your diagnosis and fix?",
        image: "https://images.unsplash.com/photo-1581092918484-8313e8f28c7d?w=1200&h=600&fit=crop&q=80",
        imageCaption: "Technician measuring voltage at camera with multimeter",
        quiz: {
            question: "Camera gets 8.3V instead of 12V due to 300ft run with 18 AWG wire. Best solution?",
            options: [
                "Replace the camera with a 24V model",
                "Run new 14 AWG wire OR install a power supply at the halfway point (150ft)",
                "Increase the power supply to 15V to compensate for drop",
                "Use a wireless camera instead"
            ],
            correctAnswer: 1,
            correctFeedback: "‚ö° Excellent! 300ft with 18 AWG is way too much voltage drop. Solutions: 1) Pull 14 AWG wire (lower resistance), or 2) Install power supply at 150ft midpoint (half the distance = 1/4 the drop). Mid-point power is often fastest! You install a small 12V supply at 150ft: Drop = (2 √ó 46m √ó 0.5 √ó 21) √∑ 1000 = 0.96V. Camera now gets 11.24V ‚úì Problem solved!",
            incorrectFeedback: "The problem is voltage DROP over distance. You need either lower-resistance wire (thicker gauge) or shorter distance (mid-point power)."
        }
    },
    {
        title: "Cable Testing Like a Pro",
        text: "Proper cable testing saves HOURS of frustration. Here's the professional method!\n\nüîå TESTING ETHERNET (PoE CAMERAS):\n\n1Ô∏è‚É£ VISUAL INSPECTION:\n   ‚Ä¢ Check for kinks, cuts, staple damage\n   ‚Ä¢ Verify Cat5e minimum (Cat6 better)\n   ‚Ä¢ Check connector tabs aren't broken\n\n2Ô∏è‚É£ CONTINUITY TEST:\n   ‚Ä¢ Use cable tester\n   ‚Ä¢ ALL 8 wires must test good\n   ‚Ä¢ Check wire map for correct order\n   ‚Ä¢ Look for shorts between pairs\n\n3Ô∏è‚É£ POE VOLTAGE TEST:\n   ‚Ä¢ Disconnect camera first!\n   ‚Ä¢ Measure pins 1-2: should be 48-54V\n   ‚Ä¢ Measure pins 3-6: should be 48-54V\n   ‚Ä¢ Both pairs must have voltage\n\n4Ô∏è‚É£ LENGTH TEST:\n   ‚Ä¢ Max PoE: 100m (328ft)\n   ‚Ä¢ Most testers measure length\n   ‚Ä¢ Over 100m = no PoE delivery\n\nüì∫ TESTING COAX (ANALOG CAMERAS):\n\n1Ô∏è‚É£ CONTINUITY:\n   ‚Ä¢ Center conductor: ~0Œ©\n   ‚Ä¢ Shield: ~0Œ©  \n   ‚Ä¢ Center to shield: Infinite Œ©\n\n2Ô∏è‚É£ VISUAL VIDEO TEST:\n   ‚Ä¢ Portable monitor at camera\n   ‚Ä¢ Compare to monitor at DVR\n   ‚Ä¢ Images should match\n\n3Ô∏è‚É£ CONNECTOR CHECK:\n   ‚Ä¢ BNC should click firmly\n   ‚Ä¢ No exposed center conductor\n   ‚Ä¢ Shield properly crimped",
        image: "https://images.unsplash.com/photo-1581092160607-1e49b2f2a7b4?w=1200&h=600&fit=crop&q=80",
        imageCaption: "Professional network cable tester showing wire map and continuity",
        links: [
            {
                icon: "üîç",
                title: "Klein Tools Cable Tester with Tone",
                price: "$89.99",
                url: "https://www.amazon.com/Klein-Tools-VDV501-851-Cable-Tester/dp/B00OQWBZ92"
            },
            {
                icon: "üìè",
                title: "Fluke MicroScanner PoE Cable Verifier",
                price: "$449.99",
                url: "https://www.amazon.com/Fluke-Networks-MS-POE-MicroScanner-Verifier/dp/B008BZBRQ6"
            },
            {
                icon: "üîå",
                title: "Budget-Friendly Cable Tester",
                price: "$24.99",
                url: "https://www.amazon.com/iMBAPrice-Network-Cable-Tester-Phone/dp/B01M63EMBQ"
            }
        ]
    },
    {
        title: "Interactive Scenario 5: The Cable Mystery",
        text: "üé¨ DETECTIVE WORK:\n\nYou're called to investigate: \"Camera 4 worked yesterday, nothing today.\"\n\nYOUR TESTS:\n‚Ä¢ Power at switch: 52V PoE ‚úì\n‚Ä¢ Switch link light: ON ‚úì\n‚Ä¢ Camera: No power, no LED\n\nYou test with cable tester at the camera end:\n\nüìä TESTER RESULTS:\n‚úÖ Wire 1: Good\n‚úÖ Wire 2: Good\n‚ùå Wire 3: OPEN (broken)\n‚úÖ Wire 4: Good\n‚úÖ Wire 5: Good\n‚ùå Wire 6: OPEN (broken)\n‚úÖ Wire 7: Good\n‚úÖ Wire 8: Good\n\nüí° PoE uses:\n‚Ä¢ Wires 1-2 for data + power\n‚Ä¢ Wires 3-6 for data + power\n\nWires 3 and 6 are broken!\n\nWhat happened?",
        image: "https://images.unsplash.com/photo-1581092795360-fd1ca04f0952?w=1200&h=600&fit=crop&q=80",
        imageCaption: "Cable tester display showing failed wires in red",
        quiz: {
            question: "Wires 1-2 good, wires 3-6 broken, wires 7-8 good. What likely happened?",
            options: [
                "The cable was defective from the factory",
                "Someone stapled or pinched the cable, crushing wires 3-6 in the middle",
                "The camera shorted out and burned the wires",
                "Lightning strike damaged specific wires"
            ],
            correctAnswer: 1,
            correctFeedback: "üéØ Detective work! Wires 3-6 are together in the cable. Damage to ONLY those wires = physical crush injury. You inspect the cable run and find a STAPLE driven through it! Customer says 'Oh yeah, we hung a picture yesterday...' SOLUTION: Cut out damaged section, install two RJ45 connectors and a coupler. Or pull new cable. Document: 'Cable damaged by staple at 8ft height near picture frame.' Customer now understands the damage!",
            incorrectFeedback: "Think about the pattern! Wires 3, 4, 5, 6 are physically grouped together in the cable. Damage to ONLY this group = something crushed the cable at one point."
        }
    },
    {
        title: "Environmental Troubleshooting",
        text: "Cameras don't just fail electrically - environment kills them too!\n\nüå°Ô∏è TEMPERATURE ISSUES:\n\n‚ùÑÔ∏è COLD (Below -10¬∞C/14¬∞F):\n‚Ä¢ Condensation inside housing\n‚Ä¢ Camera won't boot\n‚Ä¢ Lens fogs up\n‚úÖ Fix: Add heater, use cold-rated cameras\n\nüî• HEAT (Above 50¬∞C/122¬∞F):\n‚Ä¢ Camera overheats and shuts down\n‚Ä¢ Afternoon failures\n‚Ä¢ Dark housings worse\n‚úÖ Fix: Add sunshade, white housing, ventilation\n\nüíß MOISTURE PROBLEMS:\n\nüåßÔ∏è SYMPTOMS:\n‚Ä¢ Foggy lens\n‚Ä¢ Corrosion on connections  \n‚Ä¢ Intermittent operation\n‚Ä¢ Water inside housing\n\n‚úÖ PREVENTION:\n‚Ä¢ IP66 minimum rating\n‚Ä¢ Seal ALL cable entries with silicone\n‚Ä¢ Point camera down (water drains)\n‚Ä¢ Check drainage holes aren't clogged\n‚Ä¢ Use outdoor-rated connectors\n\n‚ö° LIGHTNING & SURGE:\n\nüå©Ô∏è DAMAGE PATTERNS:\n‚Ä¢ Multiple cameras fail at once\n‚Ä¢ Switch/NVR also damaged\n‚Ä¢ Happens after storms\n\n‚úÖ PROTECTION:\n‚Ä¢ Surge protectors on EVERY camera\n‚Ä¢ Surge protection at switch/NVR\n‚Ä¢ Proper system grounding\n‚Ä¢ Consider fiber for long runs",
        image: "https://images.unsplash.com/photo-1592210454359-9043f067919b?w=1200&h=600&fit=crop&q=80",
        imageCaption: "Outdoor CCTV cameras in harsh environmental conditions",
        links: [
            {
                icon: "‚ö°",
                title: "Ethernet Surge Protector (PoE)",
                price: "$39.99",
                url: "https://www.amazon.com/Ubiquiti-ETH-SP-G2-Ethernet-Surge-Protector/dp/B07PGBCQP8"
            },
            {
                icon: "üå°Ô∏è",
                title: "Camera Housing with Heater/Blower",
                price: "$89.99",
                url: "https://www.amazon.com/Outdoor-Security-Housing-Heater-Blower/dp/B07QKXN8VH"
            }
        ]
    },
    {
        title: "Professional Maintenance Schedule",
        text: "Preventive maintenance keeps systems running and builds recurring revenue!\n\nüìÖ MONTHLY CHECKS ($100-150/visit):\n\nüßπ Clean camera lenses\n  ‚Ä¢ Microfiber cloth\n  ‚Ä¢ Lens cleaning solution\n  ‚Ä¢ Check for spider webs\n  ‚Ä¢ Clear IR LED obstructions\n\nüìπ Spot-check video quality\n  ‚Ä¢ Random camera playback\n  ‚Ä¢ Check focus hasn't drifted\n  ‚Ä¢ Verify motion detection works\n\nüíæ Check storage capacity\n  ‚Ä¢ Days of recording available?\n  ‚Ä¢ Storage nearly full?\n  ‚Ä¢ Plan expansion if needed\n\nüìÖ QUARTERLY CHECKS ($200-300/visit):\n\nüîå Inspect connections\n  ‚Ä¢ Look for corrosion\n  ‚Ä¢ Tighten loose connections\n  ‚Ä¢ Check for water intrusion\n  ‚Ä¢ Test all cameras\n\n‚ö° Power system check\n  ‚Ä¢ Test UPS batteries\n  ‚Ä¢ Verify PoE budget headroom\n  ‚Ä¢ Check power supply voltages\n\nüîÑ Firmware updates\n  ‚Ä¢ Check manufacturer sites\n  ‚Ä¢ Test on one camera first\n  ‚Ä¢ Document versions\n\nüìÖ ANNUAL SERVICE ($500-800/visit):\n\nüß™ Full system test\n‚úÖ Replace surge protectors\nüßπ Clean equipment internals  \nüîÑ Update NVR/DVR firmware\nüîí Security audit\nüíæ Test backup/restore",
        image: "https://images.unsplash.com/photo-1621905251189-08b45d6a269e?w=1200&h=600&fit=crop&q=80",
        imageCaption: "Technician performing preventive maintenance on CCTV system"
    },
    {
        title: "Building Your CCTV Business",
        text: "You've got the skills - now let's talk about making money!\n\nüí∞ PRICING GUIDE:\n\nüîç DIAGNOSTIC VISIT:\n$100-150 flat rate\n‚Ä¢ Covers first hour\n‚Ä¢ Applied to repair if they proceed\n‚Ä¢ Non-refundable if they decline\n\nüîß HOURLY RATE:\n$75-125/hour\n‚Ä¢ Varies by region\n‚Ä¢ 2-hour minimum\n‚Ä¢ After-hours: +50%\n‚Ä¢ Emergency: +100%\n\nüíº COMMON JOBS:\n‚Ä¢ Camera replacement: $150-250\n‚Ä¢ Cable run (100ft): $200-400\n‚Ä¢ Network config: $100-200\n‚Ä¢ Switch replacement: $300-600  \n‚Ä¢ Full system health check: $400-600\n\nüìã MAINTENANCE CONTRACTS (Monthly):\n\nü•â BASIC ($150/month):\n   ‚Ä¢ Quarterly visits\n   ‚Ä¢ Priority scheduling\n   ‚Ä¢ 10% off repairs\n\nü•à STANDARD ($300/month):\n   ‚Ä¢ Monthly visits\n   ‚Ä¢ Remote monitoring\n   ‚Ä¢ 20% off repairs\n   ‚Ä¢ After-hours support\n\nü•á PREMIUM ($600/month):\n   ‚Ä¢ Bi-weekly visits\n   ‚Ä¢ 24/7 monitoring\n   ‚Ä¢ Free minor repairs\n   ‚Ä¢ 4-hour response guarantee\n\nüí° RECURRING REVENUE:\n10 clients √ó $300/month = $3,000/month\nBefore you do ANY project work!\n\nThis is how you build a stable business!",
        image: "https://images.unsplash.com/photo-1554224155-6726b3ff858f?w=1200&h=600&fit=crop&q=80",
        imageCaption: "CCTV service business - pricing and contracts planning"
    },
    {
        title: "Final Master Scenario",
        text: "üé¨ THE ULTIMATE TEST:\n\nYou're called to a warehouse with 16 PoE cameras. The manager is frustrated:\n\n\"Cameras 13-16 randomly go offline. Sometimes they work, sometimes they don't. It's driving us crazy!\"\n\nYOUR INVESTIGATION:\n‚Ä¢ System: 16-port PoE switch, 200W budget\n‚Ä¢ Cameras 1-12: 12W each = 144W\n‚Ä¢ Cameras 13-16: 30W each = 120W\n‚Ä¢ Total: 264W required\n‚Ä¢ Budget: 200W available\n\nBUT HERE'S THE TWIST:\nCameras 13-16 are PTZ (Pan-Tilt-Zoom) cameras. They only use 30W when MOVING. When stationary, they use 15W.\n\n‚Ä¢ Stationary load: 144W + (4 √ó 15W) = 204W (exceeds 200W slightly)\n‚Ä¢ Moving load: 144W + (4 √ó 30W) = 264W (way over!)\n\nThe warehouse has motion detection enabled on PTZ cameras. When motion detected, all 4 PTZ cameras start moving simultaneously...\n\nWhat's happening?",
        image: "https://images.unsplash.com/photo-1580894894513-541e068a3e2b?w=1200&h=600&fit=crop&q=80",
        imageCaption: "PTZ surveillance cameras in warehouse environment",
        quiz: {
            question: "Why do cameras 13-16 randomly fail? (Hint: Think about WHEN they fail)",
            options: [
                "The cameras are defective and need warranty replacement",
                "When motion triggers all PTZ cameras to move simultaneously, power demand spikes to 264W, exceeding the 200W budget - last cameras lose power",
                "The network bandwidth is saturated",
                "Someone keeps unplugging the cameras"
            ],
            correctAnswer: 1,
            correctFeedback: "üèÜ MASTER LEVEL! You identified a DYNAMIC power budget problem! At rest: barely works (204W). During motion: demand hits 264W, exceeding 200W budget - cameras 13-16 drop! SOLUTIONS: 1) Add 2nd PoE switch for cameras 13-16, 2) Use PoE injectors for PTZ cameras, 3) Stagger motion detection (don't move all PTZs at once), 4) Upgrade to 400W PoE switch. You recommend: Add 4-port PoE+ injectors ($60 each) for cameras 13-16. Total cost: $240. Problem solved! This is REAL troubleshooting - understanding system behavior over time!",
            incorrectFeedback: "Think about WHEN failures occur - during motion! PTZ cameras draw more power while moving. Multiple moving at once = power spike!"
        }
    },
    {
        title: "Congratulations! You're a CCTV Pro! üéâ",
        text: "Outstanding work! You've completed the CCTV Camera Troubleshooting certification!\n\nüéì YOU NOW KNOW HOW TO:\n\n‚úÖ Systematically troubleshoot PoE cameras\n‚úÖ Diagnose analog camera issues\n‚úÖ Calculate and plan power budgets\n‚úÖ Configure network settings properly\n‚úÖ Test cables like a professional\n‚úÖ Understand environmental impacts\n‚úÖ Solve real-world complex scenarios\n‚úÖ Price services profitably\n‚úÖ Build maintenance contracts\n‚úÖ Create recurring revenue\n\nüíº YOUR NEXT STEPS:\n\n1Ô∏è‚É£ Purchase your essential toolkit (see links earlier)\n2Ô∏è‚É£ Practice on real systems (offer free service to friends)\n3Ô∏è‚É£ Start taking CCTV jobs on FieldNation/WorkMarket\n4Ô∏è‚É£ Build a portfolio with before/after photos\n5Ô∏è‚É£ Join CCTV forums and Facebook groups\n6Ô∏è‚É£ Get manufacturer certifications (Hikvision, Dahua)\n7Ô∏è‚É£ Network with local security installers\n8Ô∏è‚É£ Start offering maintenance contracts\n\nüöÄ INCOME POTENTIAL:\n\nüí∞ Service calls: $75-125/hour\nüí∞ Installations: $300-800/day  \nüí∞ Maintenance: $150-600/month per client\nüí∞ Emergency calls: $150-250/hour\n\nüìö KEEP LEARNING:\n‚Ä¢ AI/analytics integration (hot trend!)\n‚Ä¢ Cloud-based systems  \n‚Ä¢ Thermal cameras\n‚Ä¢ License plate recognition\n‚Ä¢ Cybersecurity for IP cameras\n\nYou protect people, property, and assets. That's valuable work. Own it and charge accordingly!\n\nüéä Now go build your CCTV troubleshooting business! üîßüìπüí∞",
        image: "https://images.unsplash.com/photo-1556745753-b2904692b3cd?w=1200&h=600&fit=crop&q=80",
        imageCaption: "Professional CCTV technician - certified and ready for business"
    },
]);

const handleTutorialComplete = (answers) => {
    // Send completion to backend
    router.post('/tutorial/complete', {
        product_id: props.product.id,
        answers: answers,
    }, {
        onSuccess: () => {
            showCertificate.value = true;
        }
    });
};

const downloadCertificate = () => {
    window.open(route('tutorial.certificate', props.product.id), '_blank');
};
</script>

<template>
    <Head title="CCTV Camera Troubleshooting" />

    <AuthenticatedLayout>
        <div v-if="!showCertificate">
            <TutorialSlides 
                :slides="tutorialSlides" 
                :on-complete="handleTutorialComplete"
            />
        </div>

        <!-- Certificate View -->
        <div v-else class="min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 py-12 px-4">
            <div class="max-w-4xl mx-auto">
                <!-- Celebration -->
                <div class="text-center mb-8">
                    <div class="text-6xl mb-4">üéâüìπüéä</div>
                    <h1 class="text-4xl font-bold text-white mb-2">Congratulations!</h1>
                    <p class="text-xl text-gray-300">You've Completed CCTV Camera Troubleshooting Certification</p>
                </div>

                <!-- Certificate Preview -->
                <div class="bg-white rounded-2xl shadow-2xl p-12 mb-8 border-8 border-blue-600">
                    <div class="text-center">
                        <div class="flex justify-center mb-6">
                            <img src="/img/8bit-character.svg" alt="FieldOps Pro" class="w-24 h-24" style="image-rendering: pixelated; image-rendering: crisp-edges;" />
                        </div>
                        
                        <h2 class="text-3xl font-bold text-gray-800 mb-2">Certificate of Completion</h2>
                        <div class="w-32 h-1 bg-blue-600 mx-auto mb-6"></div>
                        
                        <p class="text-lg text-gray-600 mb-4">This certifies that</p>
                        <p class="text-3xl font-bold text-blue-600 mb-4">{{ $page.props.auth.user.name }}</p>
                        
                        <p class="text-lg text-gray-600 mb-6">has successfully completed</p>
                        <p class="text-2xl font-bold text-gray-800 mb-6">CCTV Camera Troubleshooting Certification</p>
                        
                        <p class="text-gray-600 mb-8">
                            Demonstrating proficiency in PoE digital camera systems, analog CCTV troubleshooting,<br/>
                            network configuration, cable testing, and professional installation practices
                        </p>
                        
                        <div class="flex justify-center gap-12 text-left">
                            <div>
                                <div class="border-t-2 border-gray-300 pt-2">
                                    <p class="font-semibold">FieldOps Pro</p>
                                    <p class="text-sm text-gray-600">Training Program</p>
                                </div>
                            </div>
                            <div>
                                <div class="border-t-2 border-gray-300 pt-2">
                                    <p class="font-semibold">{{ new Date().toLocaleDateString() }}</p>
                                    <p class="text-sm text-gray-600">Date of Completion</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex gap-4 justify-center">
                    <button 
                        @click="downloadCertificate"
                        class="px-8 py-4 bg-gradient-to-r from-blue-600 to-blue-500 text-white rounded-lg font-bold text-lg hover:from-blue-500 hover:to-blue-600 transition-all shadow-lg shadow-blue-500/50"
                    >
                        üìÑ Download Certificate
                    </button>
                    
                    <a 
                        :href="route('dashboard')"
                        class="px-8 py-4 bg-gray-700 text-white rounded-lg font-bold text-lg hover:bg-gray-600 transition-all"
                    >
                        Return to Dashboard
                    </a>
                </div>

                <!-- Next Steps -->
                <div class="mt-12 bg-gray-800 rounded-xl p-8 border border-gray-700">
                    <h3 class="text-2xl font-bold text-white mb-4">üìπ You're Ready! Next Steps:</h3>
                    <div class="grid md:grid-cols-2 gap-4 text-gray-300">
                        <div class="flex items-start gap-3">
                            <span class="text-2xl">üõ†Ô∏è</span>
                            <div>
                                <p class="font-semibold text-white">Build your toolkit</p>
                                <p class="text-sm">PoE tester, multimeter, cable tester, portable monitor</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-3">
                            <span class="text-2xl">üìã</span>
                            <div>
                                <p class="font-semibold text-white">Practice on real systems</p>
                                <p class="text-sm">Volunteer for friends or low-stakes jobs</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-3">
                            <span class="text-2xl">üíº</span>
                            <div>
                                <p class="font-semibold text-white">Start offering CCTV services</p>
                                <p class="text-sm">Add to your FieldNation/WorkMarket profiles</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-3">
                            <span class="text-2xl">üìö</span>
                            <div>
                                <p class="font-semibold text-white">Stay updated</p>
                                <p class="text-sm">Join CCTV forums, follow manufacturers</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-8 text-center text-gray-400 text-sm">
                    <p>Share your achievement with #FieldOpsPro #CCTVPro</p>
                </div>
            </div>
        </div>
    </AuthenticatedLayout>
</template>
